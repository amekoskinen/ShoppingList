<% layout('layouts/boilerplate') -%>
<div class="homepage">
<div class="search-box mt-5 mb-5">
<% if (!address){ %>
<div class="row">
  <div class="col-md-6 offset-md-3 mt-5">
    <form
      class="form-inline my-5 text-center text-light"
      action="/shoppinglist/getitems"
      method="POST"
    >
      <div class="form-group">
        <label for="name" class="h3">Product Name:</label>
        <input
          type="text"
          id="name"
          name="productName"
          class="form-control mx-sm-3"
          aria-describedby="addressHelp"
          value="<%=productName%>"
        />  
        <p id="itemHelp" class="text-muted">
          Write the product you are trying to add.
        </p>
      </div>
      <button type="submit" class="btn btn-primary">Find Items</button>
      <% if (productName){ %>
      <a href="/shoppinglist/additems" class="btn btn-success">Go Back</a>
      <% } %>
    </form>
 </div>
</div>
<% } %>

<% if (!productName){ %>
<div class="row">
  <div class="col-md-6 offset-md-3">
    <form
      class="form-inline my-5 text-center text-light"
      action="/shoppinglist/getcategory"
      method="POST"
    >
      <div class="form-group">
        <label for="address" class="h3">URL address:</label>
        <input
          type="text"
          id="address"
          name="address"
          class="form-control mx-sm-3"
          aria-describedby="addressHelp"
          value="<%=address%>"
        />  
        <p id="addressHelp" class="text-muted">
          URL address for category starting with "https://www.s-kaupat.fi/tuotteet/"
        </p>
      </div>
      <button type="submit" class="btn btn-primary">Find Items</button>
      <% if (address){ %>
      <a href="/shoppinglist/additems" class="btn btn-success">Go Back</a>
      <% } %> 
    </form>
 </div>
</div>
<% } %>
</div>
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-12">
      <% if (typeof products !== "undefined" && products.length > 0){%>
        <form action="/shoppinglist/additems" method="POST">
        <div class="row row-cols-4 g-1 mx-auto">
        <% for (let i=0; i<products.length; i++) {%>
        <div class="col product-card d-flex justify-content-between align-items-start">
        <label class="form-check-label h6 text-uppercase my-2 mx-2 text-light" for="<%=i%>">
          <p id="product<%=i%>"><%=products[i]%></p>
          <p id="price<%=i%>"><%=prices[i]%> â‚¬</p>
        </label>
        <input class="form-check-input d-block ml-auto" type="checkbox" style="height:22px;width:22px;" class="mx-5" name="<%=products[i]%>" id="<%=i%>">
        </div>
        <%}%>
        </div>
      <button type="button" class="btn btn-primary my-5" data-bs-toggle="modal" data-bs-target="#addItemsVerify">Add items</button>
      <div class="modal fade" id="addItemsVerify" tabindex="-1" aria-labelledby="addItemsVerifyLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="addItemsVerifyLabel">Adding Items</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
        <div class="modal-body">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
    <%}%>
    </form>
    </div>
    </div>
  </div>
</div>
</div>
<script src="/javascripts/addCheckedItems.js"></script>

